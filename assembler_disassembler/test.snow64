start:
{
	// Set the initial stack pointer
	//ldu32 du0, dzero, dzero, top_of_stack
	ldu64 du0, dzero, dzero, const__top_of_stack
	ldu64 dsp, dzero, dzero, var__stack_pointer
	adds dsp, dzero, du0

	bra main
}


global_vars:
var__stack_pointer:
	.space 8

global_constants:
const__top_of_stack:
	.db64 0x7fff



main:
{
	// Allocate 32 bytes of stack
	addis dsp, dsp, -32

	ldu64 du0, dzero, dsp, 0

	pcrels du0, const__addr_sort


//infin:
//	bra infin

main_constants:
const__addr_sort:
	.db64 sort
}


.org 0x4000
sort:
{
	//addis dsp, dsp, -32


	//addis dsp, dsp, 32
	//jmp dlr
}
