.equ reg_dzero 0
.equ reg_du0 1
.equ reg_du1 2
.equ reg_du2 3
.equ reg_du3 4
.equ reg_du4 5
.equ reg_du5 6
.equ reg_du6 7
.equ reg_du7 8
.equ reg_du8 9
.equ reg_du9 10
.equ reg_du10 11
.equ reg_du11 12
.equ reg_dlr 13
.equ reg_dfp 14
.equ reg_dsp 15

.equ syscall_disp_regs 0
.equ syscall_finish 1

start:
{
	//sim_syscall dzero, dzero, dzero, syscall_disp_regs
	//sim_syscall dzero, dzero, dzero, syscall_finish
	ldu32 dsp, dzero, dzero, const__above_top_of_stack
	ldu8 dsp, dzero, dsp, 0

	//ldu32 du0, dzero, dzero, __const__3
	//ldu32 du1, dzero, dzero, __const__4
	ldu32 du2, dsp, dzero, 0
	ldu32 du3, dsp, dzero, 4

	//sim_syscall du0, dzero, dzero, syscall_disp_regs
	//sim_syscall du1, dzero, dzero, syscall_disp_regs

	//adds du2, du0, du1
	muls du2, du0, du1
	sim_syscall du2, dzero, dzero, syscall_disp_regs


	bra main


}


.org 0x100
global_constants:
const__above_top_of_stack:
	.db32 0xf000


.org 0x1000
main:
{
	//muls dzero, dzero, dzero
	sim_syscall dsp, dzero, dzero, syscall_disp_regs
	sim_syscall dzero, dzero, dzero, syscall_finish

}
